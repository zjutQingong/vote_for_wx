<!-- saved from url=(0044)file:///G:/implement/wamp/www/text/vote.html -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="css/mui.min.css" rel="stylesheet">
<style>
img{
	width: 100%;
}
</style>
</head>
<body>
<h1 style="text-align:center">勤工之星</h1>
<div class="mui-container">
	<div class="mui-content">
	    <div class="mui-row" id="con">
	        
	    </div>
	</div>
</div>
<script type="text/template" id="tpl">
	<div class="mui-col-xs-12">
		<div class="mui-panel">
			<div class="mui-card">
				<!--页眉，放置标题-->
				<div class="mui-card-header mui-card-media">
					<img src="{#pic#}" />
				</div>
				<!--内容区-->
				<div class="mui-card-content">{#message#}</div>
				<!--页脚，放置补充信息或支持的操作-->
				<div class="mui-card-footer">{#voter_number#}</div>
			</div>
		</div>
	</div>
</script>
<script src="js/jquery-3.2.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$.ajax({
			type:"GET",
			url:"../../getMsg",
			dataType:"json",
			success: function(data){
				rendering(data);
			},
			error:function(msg){
				console.log(msg);
			}
		})
	})

	/**
	 * [formString 替换字符为相应数据]
	 * @date        2017-12-17
	 * @anotherdate 2017-12-17T16:08:35+0800
	 * @param       String                data    需要替换的字符
	 */
	function formString(data)
	{
		var str = $("#tpl").text();
		return str.replace(/\{#(\w+)#}/g, function(match, $1){
			return data[$1];
		})
	}

	/**
	 * [rendering 渲染界面]
	 * @date        2017-12-17
	 * @anotherdate 2017-12-17T16:10:17+0800
	 * @param       json                 data    从服务器获取的数据
	 */
	function rendering(data)
	{
		for (var i = 0; i < data.length; i++) {
			$("#con").append(formString(data[i]));
		}
	}
</script>
</body>
</html>